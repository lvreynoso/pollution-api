{"version":3,"sources":["../../source/lib/check-api-key.js"],"names":["checkApiKey","req","res","next","masterKey","Keys","findOne","level","list","get","query","key","status","send","message"],"mappings":";;;;;;;AAEA;;;;AAFA;AAIA,MAAMA,WAAW,GAAG,eAAdA,WAAc,CAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAC/C,QAAMC,SAAS,GAAG,MAAMC,cAAKC,OAAL,CAAa;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAb,CAAxB;;AACA,MAAIH,SAAS,CAACI,IAAV,CAAeC,GAAf,CAAoB,GAAER,GAAG,CAACS,KAAJ,CAAUC,GAAI,EAApC,MAA2C,IAA/C,EAAqD;AACjDR,IAAAA,IAAI;AACP,GAFD,MAEO;AACH,WAAOD,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAArB,CAAP;AACH;AACJ,CAPD;;eASed,W","sourcesContent":["// check-api-key.js\n\nimport Keys from '../models/Keys.js'\n\nconst checkApiKey = async function(req, res, next) {\n    const masterKey = await Keys.findOne({ level: 'master' });\n    if (masterKey.list.get(`${req.query.key}`) === true) {\n        next();\n    } else {\n        return res.status(401).send({ message: '401 Unauthorized'});\n    }\n}\n\nexport default checkApiKey;\n"],"file":"check-api-key.js"}