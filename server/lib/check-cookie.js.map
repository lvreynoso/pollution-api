{"version":3,"sources":["../../source/lib/check-cookie.js"],"names":["checkCookie","req","res","next","console","log","cookies","nToken","user","token","decodedToken","jwt","decode","complete","payload"],"mappings":";;;;;;;AAEA;;;;AAFA;AAIA,MAAMA,WAAW,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAa,0BAAb;;AACA,MAAI,OAAOJ,GAAG,CAACK,OAAJ,CAAYC,MAAnB,KAA+B,WAA/B,IAA6CN,GAAG,CAACK,OAAJ,CAAYC,MAAZ,KAAuB,IAAxE,EAA8E;AAC1EN,IAAAA,GAAG,CAACO,IAAJ,GAAW,IAAX;AACH,GAFD,MAEO;AACH,UAAMC,KAAK,GAAGR,GAAG,CAACK,OAAJ,CAAYC,MAA1B;AACA,UAAMG,YAAY,GAAGC,sBAAIC,MAAJ,CAAWH,KAAX,EAAkB;AAAEI,MAAAA,QAAQ,EAAE;AAAZ,KAAlB,KAAyC,EAA9D;AACAZ,IAAAA,GAAG,CAACO,IAAJ,GAAWE,YAAY,CAACI,OAAxB;AACH;;AACDX,EAAAA,IAAI;AACP,CAVD;;eAWeH,W","sourcesContent":["// check-cookie.js\n\nimport jwt from 'jsonwebtoken'\n\nconst checkCookie = (req, res, next) => {\n    console.log(`Checking authentication!`);\n    if (typeof req.cookies.nToken === `undefined` || req.cookies.nToken === null) {\n        req.user = null;\n    } else {\n        const token = req.cookies.nToken;\n        const decodedToken = jwt.decode(token, { complete: true }) || {};\n        req.user = decodedToken.payload;\n    }\n    next();\n}\nexport default checkCookie;\n"],"file":"check-cookie.js"}